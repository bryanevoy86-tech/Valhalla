{% extends "admin/base.html" %}
{% block content %}
<div class="panel">
  <div><span class="badge">Jobs</span></div>
  <table class="table">
    <thead><tr><th>Name</th><th>Run</th><th>RC</th><th>Duration</th><th>CWD</th><th>Output</th></tr></thead>
    <tbody>
    {% for j in jobs %}
      <tr>
        <td>{{ j.name }}</td>
        <td>{{ j.ts }}</td>
        <td class="{{ 'ok' if j.return_code==0 else 'err' }}">{{ j.return_code }}</td>
        <td>{{ j.duration_ms }} ms</td>
        <td><small>{{ j.cwd }}</small></td>
        <td>
          <a href="#" onclick="window.open(tlink('/admin/heimdall/ui/raw?rel={{ j.stdout|urlencode }}'),'_blank')">stdout</a> ·
          <a href="#" onclick="window.open(tlink('/admin/heimdall/ui/raw?rel={{ j.stderr|urlencode }}'),'_blank')">stderr</a>
          {% if j.artifacts %}
           · <a href="#" onclick="window.open(tlink('/admin/heimdall/ui/raw?rel={{ j.artifacts|urlencode }}'),'_blank')">artifacts.json</a>
          {% endif %}
          · <a href="#" onclick="window.open(tlink('/admin/heimdall/ui/raw?rel={{ j.summary|urlencode }}'),'_blank')">summary</a>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
  {% if jobs|length == 0 %}<small class="warn">No job runs yet.</small>{% endif %}
</div>
{% endblock %}
